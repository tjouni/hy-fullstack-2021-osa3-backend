(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),a=t.n(r),u=t(15),o=t.n(u),i=(t(21),t(6)),s=t(3),d=t(4),l=t.n(d),j="/api/persons",h=function(){return l.a.get(j)},b=function(e){return l.a.post(j,e)},f=function(e,n){return l.a.put("".concat(j,"/").concat(e),n)},m=function(e){return l.a.delete("".concat(j,"/").concat(e))},O=function(e){var n=e.persons,t=e.searchTerm,r=e.handleDelete,a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)("ul",{children:a.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return r(e)},children:"delete"})]},e.id)}))})]})},p=function(e){var n=e.addNumber,t=e.handleNameChange,r=e.handleNumberChange,a=e.newName,u=e.newNumber;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"add a new"}),Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:t,value:a})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{onChange:r,value:u})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})]})},v=function(e){var n=e.handleSearchTermChange,t=e.searchTerm;return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{onChange:n,value:t})]})},x=function(e){var n=e.notification;return null===n.message?null:Object(c.jsx)("div",{className:n.type,children:n.message})},g=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),o=Object(s.a)(u,2),d=o[0],l=o[1],j=Object(r.useState)(""),g=Object(s.a)(j,2),w=g[0],C=g[1],N=Object(r.useState)(""),S=Object(s.a)(N,2),y=S[0],T=S[1],k=Object(r.useState)({type:null,message:null}),D=Object(s.a)(k,2),E=D[0],I=D[1],J=function(e,n){I({type:e,message:n}),setTimeout((function(){return I({type:null,message:null})}),5e3)};Object(r.useEffect)((function(){h().then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(x,{notification:E}),Object(c.jsx)(v,{handleSearchTermChange:function(e){T(e.target.value)},searchTerm:y}),Object(c.jsx)(p,{addNumber:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));n?function(e){var n=Object(i.a)(Object(i.a)({},e),{},{number:w});window.confirm("".concat(d," is already added to phonebook, replace old number with new one?"))&&f(e.id,n).then((function(e){a(t.map((function(e){return e.id===n.id?n:e}))),J("success","Updated ".concat(e.data.name))})).catch((function(){return J("error","Information of ".concat(d," has already been removed from server"))}))}(n):b({name:d,number:w}).then((function(e){a(t.concat(e.data)),J("success","Added ".concat(d))})).catch((function(e){return J("error",e.response.data.error)}))},handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){C(e.target.value)},newName:d,newNumber:w}),Object(c.jsx)(O,{persons:t,searchTerm:y,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&m(e.id).then((function(){a(t.filter((function(n){return n.id!==e.id}))),J("success","Deleted ".concat(e.name))})).catch((function(e){return J("error",e.response.data.error)}))}})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.90096096.chunk.js.map