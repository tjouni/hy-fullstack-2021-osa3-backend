(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(2),r=t.n(a),u=t(15),i=t.n(u),o=(t(21),t(6)),s=t(3),d=t(4),l=t.n(d),j="/api/persons",b=function(){return l.a.get(j)},h=function(e){return l.a.post(j,e)},m=function(e,n){return l.a.put("".concat(j,"/").concat(e),n)},f=function(e){return l.a.delete("".concat(j,"/").concat(e))},O=function(e){var n=e.persons,t=e.searchTerm,a=e.handleDelete,r=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)("ul",{children:r.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return a(e)},children:"delete"})]},e.id)}))})]})},p=function(e){var n=e.addNumber,t=e.handleNameChange,a=e.handleNumberChange,r=e.newName,u=e.newNumber;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"add a new"}),Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{onChange:t,value:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{onChange:a,value:u})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})]})},v=function(e){var n=e.handleSearchTermChange,t=e.searchTerm;return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{onChange:n,value:t})]})},x=function(e){var n=e.notification;return null===n.message?null:Object(c.jsx)("div",{className:n.type,children:n.message})},g=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),i=Object(s.a)(u,2),d=i[0],l=i[1],j=Object(a.useState)(""),g=Object(s.a)(j,2),w=g[0],C=g[1],N=Object(a.useState)(""),S=Object(s.a)(N,2),y=S[0],T=S[1],k=Object(a.useState)({type:null,message:null}),D=Object(s.a)(k,2),E=D[0],I=D[1],J=function(e,n){I({type:e,message:n}),setTimeout((function(){return I({type:null,message:null})}),5e3)};Object(a.useEffect)((function(){b().then((function(e){return r(e.data)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(x,{notification:E}),Object(c.jsx)(v,{handleSearchTermChange:function(e){T(e.target.value)},searchTerm:y}),Object(c.jsx)(p,{addNumber:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));n?function(e){var n=Object(o.a)(Object(o.a)({},e),{},{number:w});window.confirm("".concat(d," is already added to phonebook, replace old number with new one?"))&&m(e.id,n).then((function(e){r(t.map((function(e){return e.id===n.id?n:e}))),J("success","Updated ".concat(e.data.name))})).catch((function(){return J("error","Information of ".concat(d," has already been removed from server"))}))}(n):h({name:d,number:w}).then((function(e){r(t.concat(e.data)),J("success","Added ".concat(d))}))},handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){C(e.target.value)},newName:d,newNumber:w}),Object(c.jsx)(O,{persons:t,searchTerm:y,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&f(e.id).then((function(){r(t.filter((function(n){return n.id!==e.id}))),J("success","Deleted ".concat(e.name))}))}})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ff79a2cf.chunk.js.map